{
  "name": "cora",
  "displayName": "Cora",
  "description": "VS Code 知识管理插件 - 提供页面树、大纲导航、数据库视图等知识管理功能",
  "version": "0.1.4",
  "publisher": "jqlong",
  "icon": "images/icon.png",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/jqlong17/cora"
  },
  "engines": {
    "vscode": "^1.96.0"
  },
  "categories": [
    "Other",
    "Notebooks",
    "Visualization"
  ],
  "keywords": [
    "knowledge",
    "knowledge-base",
    "notes",
    "markdown",
    "wiki",
    "笔记",
    "知识管理",
    "cora"
  ],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "knowledgeBase",
          "title": "Cora",
          "icon": "$(book)"
        }
      ]
    },
    "views": {
      "knowledgeBase": [
        {
          "id": "pageTree",
          "name": "页面",
          "when": "true",
          "size": 2
        },
        {
          "id": "kbOutline",
          "name": "大纲",
          "when": "true",
          "size": 1
        },
        {
          "id": "search",
          "name": "搜索",
          "when": "true",
          "size": 1
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "pageTree",
        "contents": "当前工作区暂无 Markdown 文件\n[新建笔记](command:knowledgeBase.newNote)"
      },
      {
        "view": "kbOutline",
        "contents": "打开 Markdown 文件查看大纲结构"
      },
      {
        "view": "search",
        "contents": "搜索笔记内容。支持单个关键词（A）或多个关键词（A B，空格分隔）。\n执行 [搜索](command:knowledgeBase.searchNotes) 打开输入框。"
      }
    ],
    "commands": [
      {
        "command": "knowledgeBase.refreshPageTree",
        "title": "刷新页面树",
        "icon": "$(refresh)"
      },
      {
        "command": "knowledgeBase.toggleFilter",
        "title": "显示全部文件 / 仅显示 MD 文件",
        "icon": "$(filter)"
      },
      {
        "command": "knowledgeBase.togglePageView",
        "title": "切换平铺/树形",
        "icon": "$(list-flat)"
      },
      {
        "command": "knowledgeBase.showAllFiles",
        "title": "显示全部文件",
        "icon": "$(files)"
      },
      {
        "command": "knowledgeBase.showMarkdownOnly",
        "title": "仅显示 Markdown",
        "icon": "$(markdown)"
      },
      {
        "command": "knowledgeBase.openPreview",
        "title": "打开预览",
        "icon": "$(open-preview)"
      },
      {
        "command": "knowledgeBase.selectFont",
        "title": "显示设置",
        "icon": "$(case-sensitive)"
      },
      {
        "command": "knowledgeBase.newNote",
        "title": "新建笔记",
        "icon": "$(new-file)"
      },
      {
        "command": "knowledgeBase.newFolder",
        "title": "新建文件夹",
        "icon": "$(new-folder)"
      },
      {
        "command": "knowledgeBase.deleteItem",
        "title": "删除",
        "icon": "$(trash)"
      },
      {
        "command": "knowledgeBase.renameItem",
        "title": "重命名",
        "icon": "$(edit)"
      },
      {
        "command": "knowledgeBase.outlineCollapseAll",
        "title": "全部折叠",
        "icon": "$(collapse-all)"
      },
      {
        "command": "knowledgeBase.outlineExpandAll",
        "title": "全部展开",
        "icon": "$(expand-all)"
      },
      {
        "command": "knowledgeBase.gotoHeading",
        "title": "跳转到标题"
      },
      {
        "command": "knowledgeBase.revealInFinder",
        "title": "在 Finder 中打开",
        "icon": "$(folder-opened)"
      },
      {
        "command": "knowledgeBase.copyPath",
        "title": "复制绝对路径",
        "icon": "$(copy)"
      },
      {
        "command": "knowledgeBase.copyRelativePath",
        "title": "复制相对路径",
        "icon": "$(copy)"
      },
      {
        "command": "knowledgeBase.searchNotes",
        "title": "搜索笔记",
        "icon": "$(search)"
      },
      {
        "command": "knowledgeBase.clearSearch",
        "title": "清除搜索",
        "icon": "$(clear-all)"
      },
      {
        "command": "knowledgeBase.setSortOrder",
        "title": "排序",
        "icon": "$(sort-precedence)"
      }
    ],
    "menus": {
      "editor/title": [
        {
          "command": "knowledgeBase.selectFont",
          "when": "activeWebviewPanelId == 'coraPreview'",
          "group": "navigation@1"
        }
      ],
      "view/title": [
        {
          "command": "knowledgeBase.toggleFilter",
          "when": "view == pageTree",
          "group": "navigation@1"
        },
        {
          "command": "knowledgeBase.togglePageView",
          "when": "view == pageTree",
          "group": "navigation@1"
        },
        {
          "command": "knowledgeBase.setSortOrder",
          "when": "view == pageTree",
          "group": "navigation@1"
        },
        {
          "command": "knowledgeBase.refreshPageTree",
          "when": "view == pageTree",
          "group": "navigation@2"
        },
        {
          "command": "knowledgeBase.newNote",
          "when": "view == pageTree",
          "group": "navigation@3"
        },
        {
          "command": "knowledgeBase.newFolder",
          "when": "view == pageTree",
          "group": "navigation@3"
        },
        {
          "command": "knowledgeBase.outlineCollapseAll",
          "when": "view == kbOutline",
          "group": "navigation@1"
        },
        {
          "command": "knowledgeBase.outlineExpandAll",
          "when": "view == kbOutline",
          "group": "navigation@2"
        },
        {
          "command": "knowledgeBase.searchNotes",
          "when": "view == search",
          "group": "navigation@1"
        },
        {
          "command": "knowledgeBase.clearSearch",
          "when": "view == search",
          "group": "navigation@2"
        }
      ],
      "view/item/context": [
        {
          "command": "knowledgeBase.clearSearch",
          "when": "view == search",
          "group": "1_search@1"
        },
        {
          "command": "knowledgeBase.newNote",
          "when": "view == pageTree && viewItem == folder",
          "group": "2_new@1"
        },
        {
          "command": "knowledgeBase.newFolder",
          "when": "view == pageTree && viewItem == folder",
          "group": "2_new@2"
        },
        {
          "command": "knowledgeBase.renameItem",
          "when": "view == pageTree",
          "group": "3_edit@1"
        },
        {
          "command": "knowledgeBase.deleteItem",
          "when": "view == pageTree",
          "group": "3_edit@2"
        },
        {
          "command": "knowledgeBase.revealInFinder",
          "when": "view == pageTree",
          "group": "4_file@1"
        },
        {
          "command": "knowledgeBase.copyPath",
          "when": "view == pageTree",
          "group": "3_file@2"
        },
        {
          "command": "knowledgeBase.copyRelativePath",
          "when": "view == pageTree",
          "group": "3_file@3"
        }
      ]
    },
    "configuration": {
      "title": "Cora",
      "properties": {
        "knowledgeBase.filterMode": {
          "type": "string",
          "default": "markdown",
          "enum": [
            "all",
            "markdown"
          ],
          "enumDescriptions": [
            "显示所有文件",
            "仅显示 Markdown 文件"
          ],
          "description": "页面树的文件过滤模式"
        },
        "knowledgeBase.pageViewMode": {
          "type": "string",
          "default": "tree",
          "enum": [
            "flat",
            "tree"
          ],
          "enumDescriptions": [
            "平铺展示所有 Markdown 文件，按修改时间降序",
            "按文件夹层级树形展示"
          ],
          "description": "页面展示模式"
        },
        "knowledgeBase.markdownExtensions": {
          "type": "array",
          "default": [
            ".md",
            ".markdown",
            ".mdx"
          ],
          "description": "识别的 Markdown 文件扩展名"
        },
        "knowledgeBase.previewOnClick": {
          "type": "boolean",
          "default": true,
          "description": "点击文件时默认打开预览"
        },
        "knowledgeBase.autoReveal": {
          "type": "boolean",
          "default": true,
          "description": "自动在页面树中显示当前打开的文件"
        },
        "knowledgeBase.showOutlineForNonMarkdown": {
          "type": "boolean",
          "default": false,
          "description": "为非 Markdown 文件显示大纲"
        },
        "knowledgeBase.sortOrder": {
          "type": "string",
          "default": "nameAsc",
          "enum": [
            "nameAsc",
            "nameDesc",
            "mtimeDesc",
            "mtimeAsc",
            "ctimeDesc",
            "ctimeAsc"
          ],
          "enumDescriptions": [
            "文件名 (A-Z)",
            "文件名 (Z-A)",
            "编辑时间 (从新到旧)",
            "编辑时间 (从旧到新)",
            "创建时间 (从新到旧)",
            "创建时间 (从旧到新)"
          ],
          "description": "页面树的排序方式"
        },
        "knowledgeBase.fontFamily": {
          "type": "string",
          "default": "Cascadia Mono",
          "enum": [
            "Cascadia Mono",
            "Google Sans",
            "IBM Plex Mono",
            "Noto Sans SC",
            "System"
          ],
          "description": "编辑器使用的字体系列"
        },
        "knowledgeBase.fontSize": {
          "type": "number",
          "default": 15,
          "minimum": 12,
          "maximum": 30,
          "description": "编辑器使用的字体大小 (px)"
        },
        "knowledgeBase.lineHeightPreview": {
          "type": "number",
          "default": 1.5,
          "minimum": 1,
          "maximum": 3,
          "description": "预览模式下行高（倍数）"
        },
        "knowledgeBase.lineHeightSource": {
          "type": "number",
          "default": 1.6,
          "minimum": 1,
          "maximum": 3,
          "description": "Markdown 模式下行高（倍数）"
        }
      }
    },
    "keybindings": [
      {
        "command": "knowledgeBase.openPreview",
        "key": "cmd+shift+v",
        "mac": "cmd+shift+v",
        "when": "editorTextFocus && editorLangId == markdown"
      },
      {
        "command": "knowledgeBase.openEditor",
        "key": "cmd+e",
        "mac": "cmd+e",
        "when": "activeWebviewPanelId == 'coraPreview'"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js",
    "seed-test-workspace": "node scripts/seed-test-workspace.js",
    "publish:all": "./scripts/publish.sh"
  },
  "devDependencies": {
    "@types/glob": "^8.1.0",
    "@types/mocha": "^10.0.6",
    "@types/node": "20.x",
    "@types/vscode": "^1.96.0",
    "@typescript-eslint/eslint-plugin": "^7.14.0",
    "@typescript-eslint/parser": "^7.14.0",
    "@vscode/test-electron": "^2.3.9",
    "eslint": "^8.57.0",
    "glob": "^10.3.10",
    "mocha": "^10.3.0",
    "typescript": "^5.5.0"
  },
  "dependencies": {
    "@types/marked": "^5.0.2",
    "marked": "^17.0.3",
    "mermaid": "^11.12.3"
  }
}