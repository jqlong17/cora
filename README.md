# Cora

一款受 Notion 启发的 VS Code 知识管理插件

## 为什么选择 Cora？

VS Code 和 Cursor 的界面是为编程设计的——左侧文件树、中间编辑器、右侧 AI 对话。这种布局对编程很友好，但对知识管理并不理想。

Notion 擅长知识管理：层级页面、文档大纲、全文搜索。但它缺少 VS Code 强大的编辑能力和 AI 集成。

Cora 将两者结合：

- 📁 **页面树** —— 层级化的知识组织，像 Notion 一样直观
- 📋 **大纲视图** —— 一键导航文档结构，支持层级折叠
- 🔍 **全文搜索** —— 支持多关键词、智能降级搜索
- 📝 **无缝编辑** —— 编辑/预览一键切换，保留 VS Code 原生体验

## 为谁设计？

- **开发者兼知识工作者** —— 用一个工具搞定代码和笔记
- **非技术背景的知识工作者** —— 借助 AI 编程的力量，更高效地管理知识

## 使用场景

| 场景 | 传统方式 | Cora 方式 |
|------|----------|-----------|
| 整理项目文档 | 文件夹嵌套混乱 | 层级化页面树，一目了然 |
| 阅读长文档 | 滚动找内容 | 大纲导航，秒跳目标章节 |
| 查找笔记 | 逐个文件打开搜索 | 全文搜索，关键词高亮 |
| 切换编程/写作 | 两个应用来回切 | 一个 VS Code，两种模式 |

## 核心设计理念

保留 VS Code 的编辑能力，增加 Notion 的组织能力。

- 左侧面板增加知识库视图，随时可切回原生文件树
- 中间区域仍用 VS Code 编辑器，预览/编辑一键切换
- 右侧 AI 对话保持不变，与知识库无缝配合

## 功能特性

### 📄 页面树 (Page Tree)
- **平铺/树形切换**: 默认按文件夹层级树形展示；可切换为平铺列表，按修改时间降序
- **文件树视图**: 树形模式下以工作区根目录为起点，展示完整文件层级
- **智能过滤**: 树形下支持【全部文件】和【仅 Markdown】两种模式切换
- **快速操作**: 新建笔记、新建文件夹、重命名、删除
- **文件操作**: 在 Finder 中打开、复制路径、复制文件
- **展开/折叠**: 全部展开、全部折叠功能

### 📋 大纲 (Outline)
- **实时跟随**: 自动跟随当前激活的编辑器/预览；编辑时大纲实时更新（含 Cora 编辑模式）
- **树形层级**: H1→H2→H3 自动构建父子关系，默认全部展开
- **快速跳转**: 点击大纲项跳转到对应位置（预览/编辑模式下均可正确跳转）
- **层级标识**: 以 H1、H2、H3 等文字标识标题层级，简洁清晰

### 🔍 搜索 (Search)
- **全文搜索**: 在工作区所有 Markdown 文件中搜索内容
- **多关键词**: 支持 `A B` 格式，搜索同时包含多个关键词的文件
- **智能降级**: 多关键词无结果时，自动降级为 OR 搜索
- **匹配统计**: 显示每个文件的匹配次数和预览文本
- **结果排序**: 按匹配次数自动排序

### 📝 编辑与预览
- **默认预览**: 点击 Markdown 文件默认以预览模式打开，直接阅读渲染后的内容
- **一键切换**: 编辑器右上角 Preview/Markdown 按钮切换模式
- **大纲同步**: 预览模式下大纲仍然显示和可用

**Cursor 与 VS Code 差异**：在 Cursor 中会看到内联的 Preview/Markdown 切换按钮；在 VS Code 中若未看到按钮，可用快捷键 `Cmd+Shift+V`（预览）与 `Cmd+E`（编辑）切换，或点击编辑器标题栏右侧的预览/编辑图标。

## 快速开始

### 安装

1. 在 VS Code/Cursor 扩展市场中搜索 "Cora"
2. 点击安装
3. 安装完成后，左侧活动栏会出现 📖 **Cora** 图标

### 使用指南

1. **打开 Cora 面板**
   - 点击左侧活动栏的 📖 Cora 图标
   - 或使用快捷键 `Cmd+Shift+P` 输入 "Cora"

2. **浏览文件（页面树）**
   - 在【页面】标签中查看工作区文件树；默认**树形**展示文件夹层级，可切换为平铺按修改时间排序
   - 标题栏可「新建笔记」「新建文件夹」；点击「切换平铺/树形」切换视图；树形下可使用【全部/Markdown】过滤
   - 右键文件可进行各种操作

3. **查看文档结构（大纲）**
   - 打开任意 Markdown 文件
   - 切换到【大纲】标签查看文档标题结构
   - 点击标题项跳转到对应位置
   - 支持展开/折叠子标题

4. **搜索笔记**
   - 切换到【搜索】标签
   - 点击 🔍 **搜索笔记** 按钮
   - 输入关键词，支持多关键词（空格分隔）
   - 查看搜索结果，点击打开文件

5. **编辑与预览**
   - 点击 Markdown 文件 → 默认以预览模式打开
   - **Cursor**：点击内容区右上角 **Markdown** / **Preview** 按钮切换
   - **VS Code**：若无内联按钮，使用 `Cmd+Shift+V`（预览）、`Cmd+E`（编辑），或标题栏右侧图标切换

## 快捷键

| 操作 | 快捷键 |
|------|--------|
| 打开 Markdown 预览 | `Cmd+Shift+V` |
| 从预览返回编辑 | `Cmd+E` |

## 右键菜单功能

在页面树中右键点击文件或文件夹：

- **新建笔记** - 在当前目录创建新 Markdown 文件
- **新建文件夹** - 在当前目录创建新文件夹
- **重命名** - 重命名文件/文件夹
- **删除** - 删除文件/文件夹
- **在 Finder 中打开** - 打开系统文件管理器
- **复制绝对路径** - 复制完整文件路径
- **复制相对路径** - 复制相对于工作区的路径
- **复制文件** - 创建文件副本（自动命名）

## 搜索技巧

| 输入 | 说明 | 结果 |
|------|------|------|
| `项目` | 单关键词 | 包含"项目"的所有笔记 |
| `项目 计划` | 多关键词（AND）| 同时包含"项目"和"计划"的笔记 |
| `项目 计划`（无 AND 结果）| 智能降级（OR）| 包含"项目"或"计划"的笔记 |

## 配置选项

在 VS Code 设置中搜索 "knowledgeBase" 进行配置：

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `knowledgeBase.filterMode` | string | `"markdown"` | 页面树的文件过滤模式（树形下生效）|
| `knowledgeBase.pageViewMode` | string | `"tree"` | 页面展示模式：`tree` 树形层级，`flat` 平铺按修改时间排序 |
| `knowledgeBase.markdownExtensions` | array | `[".md", ".markdown", ".mdx"]` | 识别的 Markdown 文件扩展名 |
| `knowledgeBase.autoReveal` | boolean | `true` | 自动在页面树中显示当前打开的文件 |

## Roadmap

以下为计划中的功能，将按优先级逐步实现。

### 基础功能

- **平铺视图**：页面模块支持切换为平铺展示所有 Markdown 文件，按修改时间降序排列，便于快速浏览与定位
- **MD 标准化**：一键将 Markdown 文件标准化，自动修复大模型生成内容中的常见格式问题，例如：
  - 强调符（粗体/斜体）前后空格
  - 表格分隔行与对齐
  - Mermaid 代码块语法错误等

### AI 功能

- **Skill 生成**：利用 AI 对整个仓库或指定代码进行分析，总结出可复现代码的 Skill 文档
- **架构图生成**：利用 AI 分析仓库代码架构，自动总结并输出架构图（如 Mermaid 等）

## 语言

- [简体中文](./README.md)
- [English](./README_EN.md)

## 许可证

MIT

Cora —— 让知识管理像写代码一样高效。
